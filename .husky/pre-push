#!/bin/sh
. "$(dirname -- "$0")/_/husky.sh"

set -euo pipefail

echo "ğŸ§ª Running pre-push quality checks..."
echo ""

echo "ğŸ§ª Testing (workspace)..."
pnpm run test -- --passWithNoTests

echo ""
echo "ğŸ“ Linting..."
for workspace in cerebral-native; do
  pnpm --filter "$workspace" run --if-present lint
done

echo ""
echo "ğŸ” Type checking..."
pnpm exec tsc --noEmit

echo ""
echo "ğŸ›¡ï¸ Running pre-commit validation..."
pre-commit run --all-files

echo ""
echo "âœ… Pre-push checks passed!"
